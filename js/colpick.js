var t;t=function(t){var e,i,a,c,o,l,r,n,s,d,p,h,u,f,v,g,k,_,m,x,b,y,w,M,C,I,T,q,H=(e={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156,hsl:!1},i=function(e,i){var a=t(i).data("colpick").hsl?L(e):D(e);t(i).data("colpick").fields.eq(1).val(a.r).end().eq(2).val(a.g).end().eq(3).val(a.b).end()},a=function(e,i){t(i).data("colpick").fields.eq(4).val(Math.round(e.h)).end().eq(5).val(Math.round(e.s)).end().eq(6).val(Math.round(e.x)).end()},c=function(e,i){t(i).data("colpick").fields.eq(0).val(t(i).data("colpick").hsl?B(e):j(e))},o=function(e,i){t(i).data("colpick").selector.css("backgroundColor","#"+(t(i).data("colpick").hsl?B({h:e.h,s:100,x:50}):j({h:e.h,s:100,x:100}))),t(i).data("colpick").selectorIndic.css({left:parseInt(t(i).data("colpick").height*e.s/100,10),top:parseInt(t(i).data("colpick").height*(100-e.x)/100,10)})},l=function(e,i){t(i).data("colpick").hue.css("top",parseInt(t(i).data("colpick").height-t(i).data("colpick").height*e.h/360,10))},r=function(e,i){t(i).data("colpick").currentColor.css("backgroundColor","#"+(t(i).data("colpick").hsl?B(e):j(e)))},n=function(e,i){t(i).data("colpick").newColor.css("backgroundColor","#"+(t(i).data("colpick").hsl?B(e):j(e)))},s=function(e){var r,s=t(this).parent().parent();if(this.parentNode.className.indexOf("_hex")>0)s.data("colpick").color=r=s.data("colpick").hsl?E(T(this.value)):X(T(this.value)),i(r,s.get(0)),a(r,s.get(0));else if(this.parentNode.className.indexOf("_hsx")>0)s.data("colpick").color=r=C({h:parseInt(s.data("colpick").fields.eq(4).val(),10),s:parseInt(s.data("colpick").fields.eq(5).val(),10),x:parseInt(s.data("colpick").fields.eq(6).val(),10)}),i(r,s.get(0)),c(r,s.get(0));else{var d={r:parseInt(s.data("colpick").fields.eq(1).val(),10),g:parseInt(s.data("colpick").fields.eq(2).val(),10),b:parseInt(s.data("colpick").fields.eq(3).val(),10)};s.data("colpick").color=r=s.data("colpick").hsl?Y(I(d)):P(I(d)),c(r,s.get(0)),a(r,s.get(0))}o(r,s.get(0)),l(r,s.get(0)),n(r,s.get(0)),s.data("colpick").onChange.apply(s.parent(),[r,s.data("colpick").hsl?B(r):j(r),s.data("colpick").hsl?L(r):D(r),s.data("colpick").el,0])},d=function(e){t(this).parent().removeClass("colpick_focus")},p=function(){t(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus"),t(this).parent().addClass("colpick_focus")},h=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i=t(this).parent().find("input").focus(),a={el:t(this).parent().addClass("colpick_slider"),max:this.parentNode.className.indexOf("_hsx_h")>0?360:this.parentNode.className.indexOf("_hsx")>0?100:255,y:e.pageY,field:i,val:parseInt(i.val(),10),preview:t(this).parent().parent().data("colpick").livePreview};t(document).mouseup(a,f),t(document).mousemove(a,u)},u=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val-t.pageY+t.data.y,10)))),t.data.preview&&s.apply(t.data.field.get(0),[!0]),!1},f=function(e){return s.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colpick_slider").find("input").focus(),t(document).off("mouseup",f),t(document).off("mousemove",u),!1},v=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i={cal:t(this).parent(),y:t(this).offset().top};t(document).on("mouseup touchend",i,k),t(document).on("mousemove touchmove",i,g);var a="touchstart"==e.type?e.originalEvent.changedTouches[0].pageY:e.pageY;return s.apply(i.cal.data("colpick").fields.eq(4).val(parseInt(360*(i.cal.data("colpick").height-(a-i.y))/i.cal.data("colpick").height,10)).get(0),[i.cal.data("colpick").livePreview]),!1},g=function(t){var e="touchmove"==t.type?t.originalEvent.changedTouches[0].pageY:t.pageY;return s.apply(t.data.cal.data("colpick").fields.eq(4).val(parseInt(360*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.y)))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},k=function(e){return t(document).off("mouseup touchend",k),t(document).off("mousemove touchmove",g),!1},_=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1;var i,a={cal:t(this).parent(),pos:t(this).offset()};return a.preview=a.cal.data("colpick").livePreview,t(document).on("mouseup touchend",a,x),t(document).on("mousemove touchmove",a,m),"touchstart"==e.type?(pageX=e.originalEvent.changedTouches[0].pageX,i=e.originalEvent.changedTouches[0].pageY):(pageX=e.pageX,i=e.pageY),s.apply(a.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.cal.data("colpick").height-(i-a.pos.top))/a.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(pageX-a.pos.left)/a.cal.data("colpick").height,10)).get(0),[a.preview]),!1},m=function(t){var e;return"touchmove"==t.type?(pageX=t.originalEvent.changedTouches[0].pageX,e=t.originalEvent.changedTouches[0].pageY):(pageX=t.pageX,e=t.pageY),s.apply(t.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(t.data.cal.data("colpick").height-Math.max(0,Math.min(t.data.cal.data("colpick").height,e-t.data.pos.top)))/t.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(t.data.cal.data("colpick").height,pageX-t.data.pos.left))/t.data.cal.data("colpick").height,10)).get(0),[t.data.preview]),!1},x=function(e){return t(document).off("mouseup touchend",x),t(document).off("mousemove touchmove",m),!1},b=function(e){var i=t(this).parent(),a=i.data("colpick").color;i.data("colpick").origColor=a,r(a,i.get(0)),i.data("colpick").onSubmit(a,i.data("colpick").hsl?B(a):j(a),i.data("colpick").hsl?L(a):D(a),i.data("colpick").el)},y=function(e){e.stopPropagation();var i=t("#"+t(this).data("colpickId"));i.data("colpick").onBeforeShow.apply(this,[i.get(0)]);var a=t(this).offset(),c=a.top+this.offsetHeight,o=a.left,l=M(),r=i.width();o+r>l.l+l.w&&(o-=r),i.css({left:o+"px",top:c+"px"}),0!=i.data("colpick").onShow.apply(this,[i.get(0)])&&i.show(),t("html").mousedown({cal:i},w),i.mousedown((function(t){t.stopPropagation()}))},w=function(e){0!=e.data.cal.data("colpick").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),t("html").off("mousedown",w)},M=function(){var t="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(t?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(t?document.documentElement.clientWidth:document.body.clientWidth)}},C=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),x:Math.min(100,Math.max(0,t.x))}},I=function(t){return{r:Math.min(255,Math.max(0,t.r)),g:Math.min(255,Math.max(0,t.g)),b:Math.min(255,Math.max(0,t.b))}},T=function(t){var e=6-t.length;if(e>0){for(var i=[],a=0;a<e;a++)i.push("0");i.push(t),t=i.join("")}return t},q=function(){var e=t(this).parent(),r=e.data("colpick").origColor;e.data("colpick").color=r,i(r,e.get(0)),c(r,e.get(0)),a(r,e.get(0)),o(r,e.get(0)),l(r,e.get(0)),n(r,e.get(0))},{init:function(u){if(u=t.extend({},e,u||{}),console.log(u.color),t(this).val()&&(u.color=t(this).val()),"string"==typeof u.color)u.color=u.hsl?E(u.color):X(u.color);else if(null!=u.color.r&&null!=u.color.g&&null!=u.color.b)u.color=u.hsl?Y(u.color):P(u.color);else{if(null==u.color.h||null==u.color.s||null==u.color.b)return this;u.color=u.hsl?fixHsl(u.color):fixHsb(u.color)}return this.each((function(){if(!t(this).data("colpickId")){var e=t.extend({},u);e.origColor=u.color;var f="collorpicker_"+parseInt(1e3*Math.random());t(this).data("colpickId",f);var g=t('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsx_x colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",f);g.addClass("colpick_"+e.layout+(e.submit?"":" colpick_"+e.layout+"_ns")),"light"!=e.colorScheme&&g.addClass("colpick_"+e.colorScheme),e.hsl&&g.addClass("colpick_hsl"),g.find("div.colpick_submit").html(e.submitText).click(b),e.fields=g.find("input").change(s).blur(d).focus(p),g.find("div.colpick_field_arrs").mousedown(h).end().find("div.colpick_current_color").click(q),e.selector=g.find("div.colpick_color").on("mousedown touchstart",_),e.selectorIndic=e.selector.find("div.colpick_selector_outer"),e.el=this,e.hue=g.find("div.colpick_hue_arrs"),huebar=e.hue.parent();var k,m,x=navigator.userAgent.toLowerCase(),w="Microsoft Internet Explorer"===navigator.appName,M=w?parseFloat(x.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,C=["#ff0000","#ff0080","#ff00ff","#8000ff","#0000ff","#0080ff","#00ffff","#00ff80","#00ff00","#80ff00","#ffff00","#ff8000","#ff0000"];if(w&&M<10)for(k=0;k<=11;k++)m=t("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+C[k]+", endColorstr="+C[k+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+C[k]+", endColorstr="+C[k+1]+')";'),huebar.append(m);else stopList=C.join(","),huebar.attr("style","background:-webkit-linear-gradient(top center,"+stopList+"); background:-moz-linear-gradient(top center,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");g.find("div.colpick_hue").on("mousedown touchstart",v),e.newColor=g.find("div.colpick_new_color"),e.currentColor=g.find("div.colpick_current_color"),g.data("colpick",e),i(e.color,g.get(0)),a(e.color,g.get(0)),c(e.color,g.get(0)),l(e.color,g.get(0)),o(e.color,g.get(0)),r(e.color,g.get(0)),n(e.color,g.get(0)),e.flat?(g.appendTo(this).show(),g.css({position:"relative",display:"block"})):(g.appendTo(document.body),t(this).on(e.showEvent,y),g.css({position:"absolute"}))}}))},showPicker:function(){return this.each((function(){t(this).data("colpickId")&&y.apply(this)}))},hidePicker:function(){return this.each((function(){t(this).data("colpickId")&&t("#"+t(this).data("colpickId")).hide()}))},setColor:function(e,s){if(s=void 0===s?1:s,"string"==typeof e)e=X(e);else if(null!=e.r&&null!=e.g&&null!=e.b)e=P(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=fixHsb(e)}return this.each((function(){if(t(this).data("colpickId")){var d=t("#"+t(this).data("colpickId"));d.data("colpick").color=e,d.data("colpick").origColor=e,i(e,d.get(0)),a(e,d.get(0)),c(e,d.get(0)),l(e,d.get(0)),o(e,d.get(0)),n(e,d.get(0)),d.data("colpick").onChange.apply(d.parent(),[e,d.data("colpick").hsl?B(e):j(e),d.data("colpick").hsl?L(e):D(e),d.data("colpick").el,1]),s&&r(e,d.get(0))}}))}}),S=function(t){return{r:(t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}},X=function(t){return P(S(t))},E=function(t){return Y(S(t))},P=function(t){var e={h:0,s:0,x:0},i=Math.min(t.r,t.g,t.b),a=Math.max(t.r,t.g,t.b),c=a-i;return e.x=a,e.s=0!=a?255*c/a:0,0!=e.s?t.r==a?e.h=(t.g-t.b)/c:t.g==a?e.h=2+(t.b-t.r)/c:e.h=4+(t.r-t.g)/c:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.x*=100/255,e},Y=function(t){return N(P(t))},N=function(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=t.x*(200-t.s)/200,e.s=t.x*t.s/(100-Math.abs(2*e.x-100)),e},z=function(t){var e={h:0,s:0,x:0};return e.h=t.h,e.x=(200*t.x+t.s*(100-Math.abs(2*t.x-100)))/200,e.s=200*(e.x-t.x)/e.x,e},D=function(t){var e={},i=t.h,a=255*t.s/100,c=255*t.x/100;if(0==a)e.r=e.g=e.b=c;else{var o=c,l=(255-a)*c/255,r=i%60*(o-l)/60;360==i&&(i=0),i<60?(e.r=o,e.b=l,e.g=l+r):i<120?(e.g=o,e.b=l,e.r=o-r):i<180?(e.g=o,e.r=l,e.b=l+r):i<240?(e.b=o,e.r=l,e.g=o-r):i<300?(e.b=o,e.g=l,e.r=l+r):i<360?(e.r=o,e.g=l,e.b=o-r):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},L=function(t){return D(z(t))},O=function(e){var i=[e.r.toString(16),e.g.toString(16),e.b.toString(16)];return t.each(i,(function(t,e){1==e.length&&(i[t]="0"+e)})),i.join("")},j=function(t){return O(D(t))},B=function(t){return j(z(t))};t.fn.extend({colpick:H.init,colpickHide:H.hidePicker,colpickShow:H.showPicker,colpickSetColor:H.setColor}),t.extend({colpick:{rgbToHex:O,rgbToHsb:P,rgbToHsl:Y,hsbToHex:j,hsbToRgb:D,hsbToHsl:N,hexToHsb:X,hexToHsl:E,hexToRgb:S,hslToHsb:z,hslToRgb:L,hslToHex:B}})},"function"==typeof best_define&&best_define.amd?best_define(["jquery"],t):t(bestJq);